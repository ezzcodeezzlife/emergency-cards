head
  meta(name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no')
  link(rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css' integrity='sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh' crossorigin='anonymous')
  title Emergency Card #{name}
  
  link(rel='apple-touch-icon' sizes='180x180' href='/public/images/apple-touch-icon.png')
  link(rel='icon' type='image/png' sizes='32x32' href='/public/images/favicon-32x32.png')
  link(rel='icon' type='image/png' sizes='16x16' href='/public/images/favicon-16x16.png')
  link(rel='manifest' href='/public/images/site.webmanifest')
  link(rel='mask-icon' href='/public/images/safari-pinned-tab.svg' color='#5bbad5')
  link(rel='shortcut icon' href='/public/images/favicon.ico')
  meta(name='msapplication-TileColor' content='#da532c')
  meta(name='msapplication-config' content='/public/images/browserconfig.xml')
  meta(name='theme-color' content='#ffffff')

  //https://icon-icons.com/icon/id-card/144637

  script(src='https://code.jquery.com/jquery-3.4.1.slim.min.js' integrity='sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n' crossorigin='anonymous')
  script(src='https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js' integrity='sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo' crossorigin='anonymous')
  script(src='https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js' integrity='sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6' crossorigin='anonymous')


  script.
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-888FGYR7LX');

  style.
    @media only screen and (min-width: 1000px) {
    .responsive {
    
    }
    }

    body{
        color: #1a202c;
        text-align: left;    
    }
    .main-body {
        padding: 15px;
    }
    .card {
        box-shadow: 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px 0 rgba(0,0,0,.06);
    }

    .card {
        position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border: 0 solid rgba(0,0,0,.125);
        border-radius: .25rem;
    }

    .card-body {
        flex: 1 1 auto;
        min-height: 1px;
        padding: 1rem;
    }

    .gutters-sm {
        margin-right: -8px;
        margin-left: -8px;
    }

    .gutters-sm>.col, .gutters-sm>[class*=col-] {
        padding-right: 8px;
        padding-left: 8px;
    }
    .mb-3, .my-3 {
        margin-bottom: 1rem!important;
    }

    .bg-gray-300 {
        background-color: #e2e8f0;
    }
    .h-100 {
        height: 100%!important;
    }
    .shadow-none {
        box-shadow: none!important;
    }


// Navigation
nav.navbar.navbar-expand-lg.navbar-light.static-top
  .container
    a.navbar-brand(href='/')
      img(src='../../public/images/logo.jpg' alt='Logo' style='width:180px;') 
    button.navbar-toggler.collapsed(type='button' data-toggle='collapse' data-target='#navbarResponsive' aria-controls='navbarResponsive' aria-expanded='false' aria-label='Toggle navigation')
      span.navbar-toggler-icon
    #navbarResponsive.navbar-collapse.collapse(style='')
      ul.navbar-nav.ml-auto
        li.nav-item.active
          a.nav-link(href='/')
            | Home
            span.sr-only (current)
        li.nav-item.active
          a.nav-link(href='/create') | Create Card

div(style='height:1px;background-color:RGB(237, 237, 237);')


//https://www.bootdey.com/snippets/view/profile-with-data-and-skills#html
.container
  .main-body
    .row.gutters-sm
      .col-md-4.mb-3
        .card
          .card-body
            .d-flex.flex-column.align-items-center.text-center
              img.rounded-circle(src='https://bootdey.com/img/Content/avatar/avatar7.png' alt='Admin' width='150')
              .mt-3
                h4 #{name}
                p.text-secondary.mb-1 Born: #{borndate}
                p.text-muted.font-size-sm #{sex} 
                //fix
        .card.mt-3
          ul.list-group.list-group-flush
            li.list-group-item.d-flex.justify-content-between.align-items-center.flex-wrap
              h6.mb-0
                //svg.feather.feather-globe.mr-2.icon-inline(xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewbox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round')
                  circle(cx='12' cy='12' r='10')
                  line(x1='2' y1='12' x2='22' y2='12')
                  path(d='M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z')
                | Pre-existing illness: 
              span.text-secondary #{previousillness}
            li.list-group-item.d-flex.justify-content-between.align-items-center.flex-wrap
              h6.mb-0
                //svg.feather.feather-github.mr-2.icon-inline(xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewbox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round')
                  path(d='M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22')
                | Bloodtype:
              span.text-secondary #{bloodtype}
            li.list-group-item.d-flex.justify-content-between.align-items-center.flex-wrap
              h6.mb-0
                //svg.feather.feather-facebook.mr-2.icon-inline.text-primary(xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewbox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round')
                  path(d='M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z')
                | Social Media 
              span.text-secondary (link)
            li.list-group-item.d-flex.justify-content-between.align-items-center.flex-wrap
              h6.mb-0
                //svg.feather.feather-globe.mr-2.icon-inline(xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewbox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round')
                  circle(cx='12' cy='12' r='10')
                  line(x1='2' y1='12' x2='22' y2='12')
                  path(d='M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z')
                | Extra Information:
              span.text-secondary #{extratext}
      .col-md-8
        .card.mb-3
          .card-body

            .row
              .col-sm-3
                h6.mb-0 Address
              .col-sm-9.text-secondary
                //- var string = "https://www.google.de/maps/place/" + #{address} ;
                //a(href = "#{string}") addr: #{address}
                | #{address}
            hr
            .row
              .col-sm-3
                h6.mb-0 Phone
              .col-sm-9.text-secondary
                | <a href="tel:#{number}">#{number}</a>
            hr
            .row
              .col-sm-3
                h6.mb-0 Emergency contact
              .col-sm-9.text-secondary
                | <a href="tel:+#{enumber}">#{enumber}</a>


        
        //.row.gutters-sm
          .col-sm-6.mb-3
            .card.h-100
              .card-body
                h6.d-flex.align-items-center.mb-3
                  i.material-icons.text-info.mr-2 assignment
                  | Project Status
                small Web Design
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 80%' aria-valuenow='80' aria-valuemin='0' aria-valuemax='100')
                small Website Markup
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 72%' aria-valuenow='72' aria-valuemin='0' aria-valuemax='100')
                small One Page
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 89%' aria-valuenow='89' aria-valuemin='0' aria-valuemax='100')
                small Mobile Template
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 55%' aria-valuenow='55' aria-valuemin='0' aria-valuemax='100')
                small Backend API
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 66%' aria-valuenow='66' aria-valuemin='0' aria-valuemax='100')
          .col-sm-6.mb-3
            .card.h-100
              .card-body
                h6.d-flex.align-items-center.mb-3
                  i.material-icons.text-info.mr-2 assignment
                  | Project Status
                small Web Design
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 80%' aria-valuenow='80' aria-valuemin='0' aria-valuemax='100')
                small Website Markup
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 72%' aria-valuenow='72' aria-valuemin='0' aria-valuemax='100')
                small One Page
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 89%' aria-valuenow='89' aria-valuemin='0' aria-valuemax='100')
                small Mobile Template
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 55%' aria-valuenow='55' aria-valuemin='0' aria-valuemax='100')
                small Backend API
                .progress.mb-3(style='height: 5px')
                  .progress-bar.bg-primary(role='progressbar' style='width: 66%' aria-valuenow='66' aria-valuemin='0' aria-valuemax='100')

    
    .alert.alert-warning(role='alert')
      | Only people with this link can access your information.
    button(id="share-button" style="width:100%; height: 8vh;").btn.btn-primary Share


script.

    var passcode =  "#{passcode}" ;
    var id =  "#{id}" ;
    var name =  "#{name}" ;
    var sex =  "#{sex}" ;
    var borndate =  "#{borndate}" ;
    var adress =  "#{adress}" ;
    var number =  "#{number}" ;
    var enumber =  "#{enumber}" ;
    var bloodtype =  "#{bloodtype}" ;
    
    var textstring = 'EmergencyCard: \n' + name + "\n" + sex + "\n" + borndate + "" + adress + "\n Tel:" + number + "\n Notfallkontakt: " + enumber + "\n Blutgruppe: " + bloodtype + "\n";
    var urlstring = 'https://emergencycard.herokuapp.com/i/' + id + "/" + passcode;
    
    console.log(passcode);
    console.log(urlstring);

    $('#share-button').on('click', () => {
        if (navigator.share) {
        navigator.share({
            title: 'Web Share API Draft',
            text: textstring,
            url: urlstring,
            })
            .then(() => console.log('Successful share'))
            .catch((error) => console.log('Error sharing', error));
        } else {
        console.log('Share not supported on this browser, do it the old way.');
        }
    });
            





    

